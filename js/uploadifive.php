<?php// Set the uplaod directory$uploadDir = '/real/uploads/';if (!empty($_FILES)) {	$tempFile   = $_FILES['Filedata']['tmp_name'][0];	$uploadDir  = $_SERVER['DOCUMENT_ROOT'] . $uploadDir;	//$targetFile = $uploadDir . $_FILES['Filedata']['name'][0];	// Validate the file type	$fileTypes = array('jpg', 'jpeg', 'gif', 'png'); // Allowed file extensions	$fileParts = pathinfo($_FILES['Filedata']['name'][0]);                $newFileName = rand_str() . '.' . $fileParts['extension'];        $targetFile = rtrim($uploadDir, '/') . '/' . $newFileName;	// Validate the filetype	if (in_array(strtolower($fileParts['extension']), $fileTypes)) {		// Save the file		move_uploaded_file($tempFile,$targetFile);                $response['name'] = $newFileName;                 $response['target_path'] = $targetFile;                 $response['result'] = true;                echo json_encode($response);	} else {            		// The file type wasn't allowed		echo 'Invalid file type.';	}}function rand_str($length = 8, $chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890') {    // Length of character list    $chars_length = (strlen($chars) - 1);    // Start our string    $string = $chars{rand(0, $chars_length)};    // Generate random string    for ($i = 1; $i < $length; $i = strlen($string)) {        // Grab a random character from our list        $r = $chars{rand(0, $chars_length)};        // Make sure the same two characters don't appear next to each other        if ($r != $string{$i - 1})            $string .= $r;    }    // Return the string    return $string;}?>